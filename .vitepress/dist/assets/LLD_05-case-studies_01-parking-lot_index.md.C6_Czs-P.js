import{_ as k,C as E,c as d,o as e,a4 as r,b as t,j as i,w as n,a,G as p,a5 as h}from"./chunks/framework.BTsuxa0O.js";const A=JSON.parse('{"title":"🅿️ Parking Lot System - Case Study","description":"","frontmatter":{},"headers":[],"relativePath":"LLD/05-case-studies/01-parking-lot/index.md","filePath":"LLD/05-case-studies/01-parking-lot/index.md"}'),c={name:"LLD/05-case-studies/01-parking-lot/index.md"};function g(o,s,y,u,b,m){const l=E("Mermaid");return e(),d("div",null,[s[9]||(s[9]=r('<h1 id="🅿️-parking-lot-system-case-study" tabindex="-1">🅿️ Parking Lot System - Case Study <a class="header-anchor" href="#🅿️-parking-lot-system-case-study" aria-label="Permalink to &quot;🅿️ Parking Lot System - Case Study&quot;">​</a></h1><h2 id="🎯-overview" tabindex="-1">🎯 Overview <a class="header-anchor" href="#🎯-overview" aria-label="Permalink to &quot;🎯 Overview&quot;">​</a></h2><p>The Parking Lot System is a comprehensive case study that demonstrates fundamental object-oriented design principles, design patterns, and real-world system modeling. This system manages vehicle parking, fee calculation, and provides various administrative features.</p><p><strong>Complexity Level</strong>: Beginner to Intermediate<br><strong>Estimated Time</strong>: 4-6 hours<br><strong>Design Patterns Used</strong>: Factory Method, Strategy, State, Observer, Template Method</p><h2 id="📋-requirements" tabindex="-1">📋 Requirements <a class="header-anchor" href="#📋-requirements" aria-label="Permalink to &quot;📋 Requirements&quot;">​</a></h2><h3 id="functional-requirements" tabindex="-1">Functional Requirements <a class="header-anchor" href="#functional-requirements" aria-label="Permalink to &quot;Functional Requirements&quot;">​</a></h3><h4 id="core-features" tabindex="-1">Core Features <a class="header-anchor" href="#core-features" aria-label="Permalink to &quot;Core Features&quot;">​</a></h4><ol><li><p><strong>Vehicle Management</strong></p><ul><li>Support different vehicle types (Car, Motorcycle, Bus, Truck)</li><li>Each vehicle has a license plate, type, and size</li></ul></li><li><p><strong>Parking Spot Management</strong></p><ul><li>Different spot sizes (Small, Medium, Large, Extra Large)</li><li>Spot availability tracking</li><li>Automatic spot assignment based on vehicle type</li></ul></li><li><p><strong>Parking Operations</strong></p><ul><li>Park vehicle (assign available spot)</li><li>Unpark vehicle (free up spot and calculate fee)</li><li>Real-time availability checking</li></ul></li><li><p><strong>Payment Processing</strong></p><ul><li>Multiple payment methods (Cash, Credit Card, Digital Wallet)</li><li>Dynamic fee calculation based on time and vehicle type</li><li>Receipt generation</li></ul></li><li><p><strong>Administrative Features</strong></p><ul><li>View all parked vehicles</li><li>View available spots</li><li>Generate revenue reports</li><li>System statistics</li></ul></li></ol><h4 id="business-rules" tabindex="-1">Business Rules <a class="header-anchor" href="#business-rules" aria-label="Permalink to &quot;Business Rules&quot;">​</a></h4><ul><li><p><strong>Spot Assignment Rules</strong>:</p><ul><li>Motorcycles can park in any spot size</li><li>Cars can park in Medium, Large, or Extra Large spots</li><li>Buses and Trucks require Large or Extra Large spots</li><li>Always assign the smallest suitable spot</li></ul></li><li><p><strong>Pricing Rules</strong>:</p><ul><li>First hour free for motorcycles</li><li>Flat rate for first 2 hours, then hourly rate</li><li>Different rates for different vehicle types</li><li>Weekend surcharge</li></ul></li></ul><h3 id="non-functional-requirements" tabindex="-1">Non-Functional Requirements <a class="header-anchor" href="#non-functional-requirements" aria-label="Permalink to &quot;Non-Functional Requirements&quot;">​</a></h3><ul><li><strong>Performance</strong>: System should handle 1000+ concurrent operations</li><li><strong>Scalability</strong>: Easily extendable to multiple floors and locations</li><li><strong>Maintainability</strong>: Clean code with proper separation of concerns</li><li><strong>Reliability</strong>: Robust error handling and data consistency</li></ul><h2 id="🏗️-system-architecture" tabindex="-1">🏗️ System Architecture <a class="header-anchor" href="#🏗️-system-architecture" aria-label="Permalink to &quot;🏗️ System Architecture&quot;">​</a></h2><h3 id="high-level-architecture" tabindex="-1">High-Level Architecture <a class="header-anchor" href="#high-level-architecture" aria-label="Permalink to &quot;High-Level Architecture&quot;">​</a></h3>',14)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-223",class:"mermaid my-class",graph:"graph%20TD%0A%20%20%20%20A%5BClient%20Interface%5D%20--%3E%20B%5BParking%20Lot%20Service%5D%0A%20%20%20%20B%20--%3E%20C%5BVehicle%20Management%5D%0A%20%20%20%20B%20--%3E%20D%5BSpot%20Management%5D%0A%20%20%20%20B%20--%3E%20E%5BPayment%20Processing%5D%0A%20%20%20%20B%20--%3E%20F%5BNotification%20System%5D%0A%0A%20%20%20%20C%20--%3E%20G%5BVehicle%20Factory%5D%0A%20%20%20%20D%20--%3E%20H%5BSpot%20Allocation%20Strategy%5D%0A%20%20%20%20E%20--%3E%20I%5BPayment%20Strategy%5D%0A%20%20%20%20F%20--%3E%20J%5BObserver%20Pattern%5D%0A%0A%20%20%20%20B%20--%3E%20K%5BData%20Storage%5D%0A%20%20%20%20K%20--%3E%20L%5B(Vehicles)%5D%0A%20%20%20%20K%20--%3E%20M%5B(Parking%20Spots)%5D%0A%20%20%20%20K%20--%3E%20N%5B(Transactions)%5D%0A"})]),fallback:n(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[10]||(s[10]=i("h3",{id:"core-components-overview",tabindex:"-1"},[a("Core Components Overview "),i("a",{class:"header-anchor",href:"#core-components-overview","aria-label":'Permalink to "Core Components Overview"'},"​")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-227",class:"mermaid my-class",graph:"classDiagram%0A%20%20%20%20class%20ParkingLot%20%7B%0A%20%20%20%20%20%20%20%20-name%3A%20String%0A%20%20%20%20%20%20%20%20-floors%3A%20List~Floor~%0A%20%20%20%20%20%20%20%20-paymentProcessor%3A%20PaymentProcessor%0A%20%20%20%20%20%20%20%20%2BparkVehicle(vehicle)%0A%20%20%20%20%20%20%20%20%2BunparkVehicle(ticketId)%0A%20%20%20%20%20%20%20%20%2BgetAvailableSpots()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20Floor%20%7B%0A%20%20%20%20%20%20%20%20-floorNumber%3A%20int%0A%20%20%20%20%20%20%20%20-parkingSpots%3A%20List~ParkingSpot~%0A%20%20%20%20%20%20%20%20%2BfindAvailableSpot(vehicleType)%0A%20%20%20%20%20%20%20%20%2BgetAvailableSpotCount()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20ParkingSpot%20%7B%0A%20%20%20%20%20%20%20%20-spotId%3A%20String%0A%20%20%20%20%20%20%20%20-spotType%3A%20SpotType%0A%20%20%20%20%20%20%20%20-state%3A%20SpotState%0A%20%20%20%20%20%20%20%20-parkedVehicle%3A%20Vehicle%0A%20%20%20%20%20%20%20%20%2Bpark(vehicle)%0A%20%20%20%20%20%20%20%20%2Bunpark()%0A%20%20%20%20%20%20%20%20%2BisAvailable()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20Vehicle%20%7B%0A%20%20%20%20%20%20%20%20-licenseNumber%3A%20String%0A%20%20%20%20%20%20%20%20-vehicleType%3A%20VehicleType%0A%20%20%20%20%20%20%20%20-parkingTicket%3A%20ParkingTicket%0A%20%20%20%20%7D%0A%0A%20%20%20%20ParkingLot%20--%3E%20Floor%0A%20%20%20%20Floor%20--%3E%20ParkingSpot%0A%20%20%20%20ParkingSpot%20--%3E%20Vehicle%0A"})]),fallback:n(()=>[...s[1]||(s[1]=[a(" Loading... ",-1)])]),_:1})),s[11]||(s[11]=i("h2",{id:"🎨-design-patterns-implementation",tabindex:"-1"},[a("🎨 Design Patterns Implementation "),i("a",{class:"header-anchor",href:"#🎨-design-patterns-implementation","aria-label":'Permalink to "🎨 Design Patterns Implementation"'},"​")],-1)),s[12]||(s[12]=i("h3",{id:"_1-factory-method-pattern",tabindex:"-1"},[a("1. Factory Method Pattern "),i("a",{class:"header-anchor",href:"#_1-factory-method-pattern","aria-label":'Permalink to "1. Factory Method Pattern"'},"​")],-1)),s[13]||(s[13]=i("p",null,[i("strong",null,"Purpose"),a(": Create different types of vehicles without specifying their exact classes.")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-237",class:"mermaid my-class",graph:"classDiagram%0A%20%20%20%20class%20VehicleFactory%20%7B%0A%20%20%20%20%20%20%20%20%3C%3Cabstract%3E%3E%0A%20%20%20%20%20%20%20%20%2BcreateVehicle(type%2C%20license)%3A%20Vehicle%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20ConcreteVehicleFactory%20%7B%0A%20%20%20%20%20%20%20%20%2BcreateVehicle(type%2C%20license)%3A%20Vehicle%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20Vehicle%20%7B%0A%20%20%20%20%20%20%20%20%3C%3Cabstract%3E%3E%0A%20%20%20%20%20%20%20%20-licenseNumber%3A%20String%0A%20%20%20%20%20%20%20%20-vehicleType%3A%20VehicleType%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20Car%20%7B%0A%20%20%20%20%20%20%20%20%2BgetVehicleType()%3A%20VehicleType%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20Motorcycle%20%7B%0A%20%20%20%20%20%20%20%20%2BgetVehicleType()%3A%20VehicleType%0A%20%20%20%20%7D%0A%0A%20%20%20%20VehicleFactory%20%3C%7C--%20ConcreteVehicleFactory%0A%20%20%20%20Vehicle%20%3C%7C--%20Car%0A%20%20%20%20Vehicle%20%3C%7C--%20Motorcycle%0A%20%20%20%20ConcreteVehicleFactory%20..%3E%20Vehicle%0A"})]),fallback:n(()=>[...s[2]||(s[2]=[a(" Loading... ",-1)])]),_:1})),s[14]||(s[14]=i("h3",{id:"_2-strategy-pattern",tabindex:"-1"},[a("2. Strategy Pattern "),i("a",{class:"header-anchor",href:"#_2-strategy-pattern","aria-label":'Permalink to "2. Strategy Pattern"'},"​")],-1)),s[15]||(s[15]=i("p",null,[i("strong",null,"Purpose"),a(": Implement different spot allocation and payment strategies.")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-244",class:"mermaid my-class",graph:"classDiagram%0A%20%20%20%20class%20SpotAllocationStrategy%20%7B%0A%20%20%20%20%20%20%20%20%3C%3Cinterface%3E%3E%0A%20%20%20%20%20%20%20%20%2BfindSpot(floor%2C%20vehicleType)%3A%20ParkingSpot%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20NearestSpotStrategy%20%7B%0A%20%20%20%20%20%20%20%20%2BfindSpot(floor%2C%20vehicleType)%3A%20ParkingSpot%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20SmallestSuitableSpotStrategy%20%7B%0A%20%20%20%20%20%20%20%20%2BfindSpot(floor%2C%20vehicleType)%3A%20ParkingSpot%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20PaymentStrategy%20%7B%0A%20%20%20%20%20%20%20%20%3C%3Cinterface%3E%3E%0A%20%20%20%20%20%20%20%20%2BprocessPayment(amount)%3A%20PaymentResult%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20CashPayment%20%7B%0A%20%20%20%20%20%20%20%20%2BprocessPayment(amount)%3A%20PaymentResult%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20CreditCardPayment%20%7B%0A%20%20%20%20%20%20%20%20%2BprocessPayment(amount)%3A%20PaymentResult%0A%20%20%20%20%7D%0A%0A%20%20%20%20SpotAllocationStrategy%20%3C%7C..%20NearestSpotStrategy%0A%20%20%20%20SpotAllocationStrategy%20%3C%7C..%20SmallestSuitableSpotStrategy%0A%20%20%20%20PaymentStrategy%20%3C%7C..%20CashPayment%0A%20%20%20%20PaymentStrategy%20%3C%7C..%20CreditCardPayment%0A"})]),fallback:n(()=>[...s[3]||(s[3]=[a(" Loading... ",-1)])]),_:1})),s[16]||(s[16]=i("h3",{id:"_3-state-pattern",tabindex:"-1"},[a("3. State Pattern "),i("a",{class:"header-anchor",href:"#_3-state-pattern","aria-label":'Permalink to "3. State Pattern"'},"​")],-1)),s[17]||(s[17]=i("p",null,[i("strong",null,"Purpose"),a(": Manage different states of parking spots.")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-251",class:"mermaid my-class",graph:"stateDiagram-v2%0A%20%20%20%20%5B*%5D%20--%3E%20Available%0A%20%20%20%20Available%20--%3E%20Occupied%20%3A%20park()%0A%20%20%20%20Occupied%20--%3E%20Available%20%3A%20unpark()%0A%20%20%20%20Available%20--%3E%20OutOfService%20%3A%20disable()%0A%20%20%20%20OutOfService%20--%3E%20Available%20%3A%20enable()%0A%20%20%20%20Occupied%20--%3E%20OutOfService%20%3A%20disable()%0A"})]),fallback:n(()=>[...s[4]||(s[4]=[a(" Loading... ",-1)])]),_:1})),s[18]||(s[18]=i("h3",{id:"_4-observer-pattern",tabindex:"-1"},[a("4. Observer Pattern "),i("a",{class:"header-anchor",href:"#_4-observer-pattern","aria-label":'Permalink to "4. Observer Pattern"'},"​")],-1)),s[19]||(s[19]=i("p",null,[i("strong",null,"Purpose"),a(": Notify interested parties about parking events.")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-258",class:"mermaid my-class",graph:"classDiagram%0A%20%20%20%20class%20ParkingEventPublisher%20%7B%0A%20%20%20%20%20%20%20%20-observers%3A%20List~ParkingObserver~%0A%20%20%20%20%20%20%20%20%2BaddObserver(observer)%0A%20%20%20%20%20%20%20%20%2BremoveObserver(observer)%0A%20%20%20%20%20%20%20%20%2BnotifyObservers(event)%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20ParkingObserver%20%7B%0A%20%20%20%20%20%20%20%20%3C%3Cinterface%3E%3E%0A%20%20%20%20%20%20%20%20%2BonParkingEvent(event)%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20DisplayBoard%20%7B%0A%20%20%20%20%20%20%20%20%2BonParkingEvent(event)%0A%20%20%20%20%20%20%20%20%2BupdateAvailableSpots()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20NotificationService%20%7B%0A%20%20%20%20%20%20%20%20%2BonParkingEvent(event)%0A%20%20%20%20%20%20%20%20%2BsendNotification()%0A%20%20%20%20%7D%0A%0A%20%20%20%20ParkingEventPublisher%20--%3E%20ParkingObserver%0A%20%20%20%20ParkingObserver%20%3C%7C..%20DisplayBoard%0A%20%20%20%20ParkingObserver%20%3C%7C..%20NotificationService%0A"})]),fallback:n(()=>[...s[5]||(s[5]=[a(" Loading... ",-1)])]),_:1})),s[20]||(s[20]=r(`<h2 id="💻-implementation" tabindex="-1">💻 Implementation <a class="header-anchor" href="#💻-implementation" aria-label="Permalink to &quot;💻 Implementation&quot;">​</a></h2><h3 id="core-classes" tabindex="-1">Core Classes <a class="header-anchor" href="#core-classes" aria-label="Permalink to &quot;Core Classes&quot;">​</a></h3><h4 id="_1-vehicle-hierarchy" tabindex="-1">1. Vehicle Hierarchy <a class="header-anchor" href="#_1-vehicle-hierarchy" aria-label="Permalink to &quot;1. Vehicle Hierarchy&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Abstract Vehicle class</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String licenseNumber;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleType vehicleType;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    protected</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParkingTicket parkingTicket;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">licenseNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.licenseNumber </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> licenseNumber;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.vehicleType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getVehicleType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleType </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVehicleType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> abstract</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotType </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequiredSpotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Getters and setters</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Concrete Vehicle implementations</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Car</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Car</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">licenseNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(licenseNumber);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleType </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVehicleType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleType.CAR;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotType </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequiredSpotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotType.MEDIUM;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Motorcycle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> extends</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Motorcycle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">licenseNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        super</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(licenseNumber);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleType </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getVehicleType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleType.MOTORCYCLE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotType </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequiredSpotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotType.SMALL;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h4 id="_2-parking-spot-management" tabindex="-1">2. Parking Spot Management <a class="header-anchor" href="#_2-parking-spot-management" aria-label="Permalink to &quot;2. Parking Spot Management&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String spotId;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotType spotType;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotState state;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vehicle parkedVehicle;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalDateTime parkingTime;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">spotId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, SpotType </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">spotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.spotId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spotId;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.spotType </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spotType;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotState.AVAILABLE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> canFitVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Vehicle </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isAvailable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">               spotType.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">canFit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vehicle.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getRequiredSpotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> synchronized</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> park</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Vehicle </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">canFitVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vehicle)) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parkedVehicle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vehicle;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotState.OCCUPIED;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parkingTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LocalDateTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Create parking ticket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ParkingTicket ticket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingTicket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                generateTicketId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                vehicle,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                parkingTime</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            vehicle.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setParkingTicket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ticket);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> synchronized</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Vehicle </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unpark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotState.OCCUPIED) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Vehicle vehicle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parkedVehicle;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parkedVehicle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotState.AVAILABLE;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parkingTime </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vehicle;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> isAvailable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> state </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotState.AVAILABLE;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h4 id="_3-strategy-pattern-implementation" tabindex="-1">3. Strategy Pattern Implementation <a class="header-anchor" href="#_3-strategy-pattern-implementation" aria-label="Permalink to &quot;3. Strategy Pattern Implementation&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SpotAllocationStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ParkingSpot </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAvailableSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Floor </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Vehicle </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SmallestSuitableSpotStrategy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SpotAllocationStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParkingSpot </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAvailableSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Floor </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Vehicle </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ParkingSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; suitableSpots </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> floor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParkingSpots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">canFitVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vehicle))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sorted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Comparator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">comparing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSpotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSize</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">collect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Collectors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">toList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> suitableSpots.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> suitableSpots.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NearestSpotStrategy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SpotAllocationStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParkingSpot </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAvailableSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Floor </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Vehicle </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> floor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParkingSpots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">canFitVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vehicle))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findFirst</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Assumes spots are ordered by distance</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">orElse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="_4-payment-processing" tabindex="-1">4. Payment Processing <a class="header-anchor" href="#_4-payment-processing" aria-label="Permalink to &quot;4. Payment Processing&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    PaymentResult </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">double</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, PaymentDetails </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">details</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreditCardPayment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PaymentResult </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">double</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, PaymentDetails </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">details</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Simulate credit card processing</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">validateCreditCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(details.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCardNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Payment successful&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                                   generateTransactionId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid credit card&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> boolean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validateCreditCard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cardNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Basic validation logic</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cardNumber </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cardNumber.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 16</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CashPayment</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PaymentResult </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">double</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> amount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, PaymentDetails </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">details</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Cash payments are always successful if amount is sufficient</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> providedAmount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> details.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (providedAmount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> amount) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> change </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> providedAmount </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> amount;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Payment successful&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                                   generateTransactionId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), change);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Insufficient cash&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h4 id="_5-main-parking-lot-system" tabindex="-1">5. Main Parking Lot System <a class="header-anchor" href="#_5-main-parking-lot-system" aria-label="Permalink to &quot;5. Main Parking Lot System&quot;">​</a></h4><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingLot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String name;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; floors;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SpotAllocationStrategy allocationStrategy;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParkingFeeCalculator feeCalculator;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> List&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ParkingObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; observers;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingLot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.floors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.allocationStrategy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SmallestSuitableSpotStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.feeCalculator </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingFeeCalculator</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.observers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ArrayList&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ParkingTicket </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parkVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Vehicle </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">vehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Floor floor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> floors) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ParkingSpot spot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> allocationStrategy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">findAvailableSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(floor, vehicle);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (spot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> spot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">park</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(vehicle)) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                // Notify observers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                notifyObservers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ParkingEventType.VEHICLE_PARKED,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                               vehicle, spot));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vehicle.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParkingTicket</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingLotFullException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;No available spots for vehicle: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                        vehicle.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getLicenseNumber</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PaymentResult </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unparkVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(String </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ticketId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, PaymentStrategy </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">paymentStrategy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ParkingTicket ticket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> findTicketById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ticketId);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ticket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InvalidTicketException</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Invalid ticket ID: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ticketId);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Calculate parking fee</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        double</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fee </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feeCalculator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">calculateFee</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ticket);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Process payment</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PaymentResult paymentResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> paymentStrategy.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">processPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fee,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                                                                   new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PaymentDetails</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (paymentResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isSuccessful</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Unpark vehicle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Vehicle vehicle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ticket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParkingSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unpark</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Generate receipt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Receipt receipt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Receipt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ticket, fee, paymentResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTransactionId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Notify observers</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">            notifyObservers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ParkingEventType.VEHICLE_UNPARKED,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                           vehicle, ticket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getParkingSpot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            paymentResult.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setReceipt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(receipt);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> paymentResult;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getAvailableSpotCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(SpotType </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">spotType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> floors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mapToInt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(floor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> floor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAvailableSpotCount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(spotType))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Observer pattern methods</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ParkingObserver </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">observer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        observers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(observer);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> notifyObservers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ParkingEvent </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        observers.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(observer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> observer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onParkingEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br></div></div><h3 id="usage-example" tabindex="-1">Usage Example <a class="header-anchor" href="#usage-example" aria-label="Permalink to &quot;Usage Example&quot;">​</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingLotDemo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">args</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Create parking lot</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ParkingLot parkingLot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ParkingLot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;City Center Parking&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Add floors and spots</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Floor groundFloor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Floor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        groundFloor.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addParkingSpots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createParkingSpots</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addFloor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(groundFloor);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Add observers</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DisplayBoard</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addObserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NotificationService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Create vehicles</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Vehicle car </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(VehicleType.CAR, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ABC123&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Vehicle motorcycle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> VehicleFactory.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(VehicleType.MOTORCYCLE, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;XYZ789&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Park vehicles</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ParkingTicket carTicket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parkVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(car);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Car parked. Ticket ID: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> carTicket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTicketId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ParkingTicket motorTicket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parkVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(motorcycle);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Motorcycle parked. Ticket ID: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> motorTicket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTicketId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Simulate some time passing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Thread.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sleep</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 1 hour</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Unpark vehicles with different payment methods</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PaymentStrategy creditCard </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CreditCardPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PaymentResult carPayment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unparkVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(carTicket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTicketId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                               creditCard);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (carPayment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isSuccessful</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Car unparked successfully. Fee: $&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                 carPayment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReceipt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTotalAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PaymentStrategy cash </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CashPayment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            PaymentResult motorPayment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parkingLot.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unparkVehicle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(motorTicket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTicketId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                                 cash);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (motorPayment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isSuccessful</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Motorcycle unparked successfully. Fee: $&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                 motorPayment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getReceipt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTotalAmount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.err.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Error: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="📊-system-features-demonstration" tabindex="-1">📊 System Features Demonstration <a class="header-anchor" href="#📊-system-features-demonstration" aria-label="Permalink to &quot;📊 System Features Demonstration&quot;">​</a></h2><h3 id="parking-operations-flow" tabindex="-1">Parking Operations Flow <a class="header-anchor" href="#parking-operations-flow" aria-label="Permalink to &quot;Parking Operations Flow&quot;">​</a></h3>`,16)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-295",class:"mermaid my-class",graph:"sequenceDiagram%0A%20%20%20%20participant%20C%20as%20Client%0A%20%20%20%20participant%20PL%20as%20ParkingLot%0A%20%20%20%20participant%20SA%20as%20SpotAllocation%0A%20%20%20%20participant%20PS%20as%20ParkingSpot%0A%20%20%20%20participant%20FC%20as%20FeeCalculator%0A%20%20%20%20participant%20PP%20as%20PaymentProcessor%0A%20%20%20%20participant%20O%20as%20Observers%0A%0A%20%20%20%20C-%3E%3EPL%3A%20parkVehicle(vehicle)%0A%20%20%20%20PL-%3E%3ESA%3A%20findAvailableSpot(floor%2C%20vehicle)%0A%20%20%20%20SA--%3E%3EPL%3A%20availableSpot%0A%20%20%20%20PL-%3E%3EPS%3A%20park(vehicle)%0A%20%20%20%20PS--%3E%3EPL%3A%20parkingTicket%0A%20%20%20%20PL-%3E%3EO%3A%20notify(VEHICLE_PARKED)%0A%20%20%20%20PL--%3E%3EC%3A%20parkingTicket%0A%0A%20%20%20%20Note%20over%20C%2CO%3A%20Time%20passes...%0A%0A%20%20%20%20C-%3E%3EPL%3A%20unparkVehicle(ticketId%2C%20paymentMethod)%0A%20%20%20%20PL-%3E%3EFC%3A%20calculateFee(ticket)%0A%20%20%20%20FC--%3E%3EPL%3A%20fee%0A%20%20%20%20PL-%3E%3EPP%3A%20processPayment(fee)%0A%20%20%20%20PP--%3E%3EPL%3A%20paymentResult%0A%20%20%20%20PL-%3E%3EPS%3A%20unpark()%0A%20%20%20%20PS--%3E%3EPL%3A%20vehicle%0A%20%20%20%20PL-%3E%3EO%3A%20notify(VEHICLE_UNPARKED)%0A%20%20%20%20PL--%3E%3EC%3A%20paymentResult%20%2B%20receipt%0A"})]),fallback:n(()=>[...s[6]||(s[6]=[a(" Loading... ",-1)])]),_:1})),s[21]||(s[21]=i("h3",{id:"spot-allocation-algorithm",tabindex:"-1"},[a("Spot Allocation Algorithm "),i("a",{class:"header-anchor",href:"#spot-allocation-algorithm","aria-label":'Permalink to "Spot Allocation Algorithm"'},"​")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-299",class:"mermaid my-class",graph:"flowchart%20TD%0A%20%20%20%20A%5BVehicle%20arrives%5D%20--%3E%20B%7BCheck%20vehicle%20type%7D%0A%20%20%20%20B%20--%3E%7CMotorcycle%7C%20C%5BCan%20use%20any%20spot%20size%5D%0A%20%20%20%20B%20--%3E%7CCar%7C%20D%5BNeeds%20Medium%2B%20spot%5D%0A%20%20%20%20B%20--%3E%7CBus%2FTruck%7C%20E%5BNeeds%20Large%2B%20spot%5D%0A%0A%20%20%20%20C%20--%3E%20F%5BFind%20smallest%20available%20spot%5D%0A%20%20%20%20D%20--%3E%20F%0A%20%20%20%20E%20--%3E%20F%0A%0A%20%20%20%20F%20--%3E%20G%7BSpot%20found%3F%7D%0A%20%20%20%20G%20--%3E%7CYes%7C%20H%5BAssign%20spot%5D%0A%20%20%20%20G%20--%3E%7CNo%7C%20I%5BCheck%20next%20floor%5D%0A%0A%20%20%20%20I%20--%3E%20J%7BMore%20floors%3F%7D%0A%20%20%20%20J%20--%3E%7CYes%7C%20F%0A%20%20%20%20J%20--%3E%7CNo%7C%20K%5BParking%20lot%20full%5D%0A%0A%20%20%20%20H%20--%3E%20L%5BCreate%20parking%20ticket%5D%0A%20%20%20%20K%20--%3E%20M%5BReject%20vehicle%5D%0A"})]),fallback:n(()=>[...s[7]||(s[7]=[a(" Loading... ",-1)])]),_:1})),s[22]||(s[22]=i("h3",{id:"fee-calculation-logic",tabindex:"-1"},[a("Fee Calculation Logic "),i("a",{class:"header-anchor",href:"#fee-calculation-logic","aria-label":'Permalink to "Fee Calculation Logic"'},"​")],-1)),(e(),t(h,null,{default:n(()=>[p(l,{id:"mermaid-303",class:"mermaid my-class",graph:"flowchart%20TD%0A%20%20%20%20A%5BCalculate%20parking%20fee%5D%20--%3E%20B%5BGet%20parking%20duration%5D%0A%20%20%20%20B%20--%3E%20C%7BVehicle%20type%3F%7D%0A%0A%20%20%20%20C%20--%3E%7CMotorcycle%7C%20D%7BDuration%20%3C%201%20hour%3F%7D%0A%20%20%20%20C%20--%3E%7CCar%7C%20E%5BApply%20car%20rates%5D%0A%20%20%20%20C%20--%3E%7CBus%2FTruck%7C%20F%5BApply%20commercial%20rates%5D%0A%0A%20%20%20%20D%20--%3E%7CYes%7C%20G%5BFree%20parking%5D%0A%20%20%20%20D%20--%3E%7CNo%7C%20H%5BApply%20motorcycle%20rates%5D%0A%0A%20%20%20%20E%20--%3E%20I%7BDuration%20%3C%3D%202%20hours%3F%7D%0A%20%20%20%20F%20--%3E%20J%5BFlat%20rate%20%2B%20hourly%5D%0A%20%20%20%20H%20--%3E%20I%0A%20%20%20%20G%20--%3E%20K%5BFinal%20amount%3A%20%240%5D%0A%0A%20%20%20%20I%20--%3E%7CYes%7C%20L%5BFlat%20rate%20only%5D%0A%20%20%20%20I%20--%3E%7CNo%7C%20M%5BFlat%20rate%20%2B%20additional%20hours%5D%0A%20%20%20%20J%20--%3E%20N%5BCalculate%20total%5D%0A%20%20%20%20L%20--%3E%20N%0A%20%20%20%20M%20--%3E%20N%0A%0A%20%20%20%20N%20--%3E%20O%7BWeekend%3F%7D%0A%20%20%20%20O%20--%3E%7CYes%7C%20P%5BApply%20surcharge%5D%0A%20%20%20%20O%20--%3E%7CNo%7C%20Q%5BFinal%20amount%5D%0A%20%20%20%20P%20--%3E%20Q%0A"})]),fallback:n(()=>[...s[8]||(s[8]=[a(" Loading... ",-1)])]),_:1})),s[23]||(s[23]=r('<h2 id="🎯-key-design-decisions" tabindex="-1">🎯 Key Design Decisions <a class="header-anchor" href="#🎯-key-design-decisions" aria-label="Permalink to &quot;🎯 Key Design Decisions&quot;">​</a></h2><h3 id="_1-vehicle-type-hierarchy" tabindex="-1">1. <strong>Vehicle Type Hierarchy</strong> <a class="header-anchor" href="#_1-vehicle-type-hierarchy" aria-label="Permalink to &quot;1. **Vehicle Type Hierarchy**&quot;">​</a></h3><ul><li><strong>Decision</strong>: Use inheritance for different vehicle types</li><li><strong>Rationale</strong>: Each vehicle type has different behavior (spot requirements, fees)</li><li><strong>Alternative</strong>: Could use composition with strategy pattern for behavior</li></ul><h3 id="_2-spot-allocation-strategy" tabindex="-1">2. <strong>Spot Allocation Strategy</strong> <a class="header-anchor" href="#_2-spot-allocation-strategy" aria-label="Permalink to &quot;2. **Spot Allocation Strategy**&quot;">​</a></h3><ul><li><strong>Decision</strong>: Strategy pattern for different allocation algorithms</li><li><strong>Rationale</strong>: Allows runtime switching of allocation strategies</li><li><strong>Benefit</strong>: Easy to add new strategies (random, priority-based, etc.)</li></ul><h3 id="_3-payment-processing" tabindex="-1">3. <strong>Payment Processing</strong> <a class="header-anchor" href="#_3-payment-processing" aria-label="Permalink to &quot;3. **Payment Processing**&quot;">​</a></h3><ul><li><strong>Decision</strong>: Strategy pattern for different payment methods</li><li><strong>Rationale</strong>: Multiple payment types with different processing logic</li><li><strong>Extensibility</strong>: Easy to add new payment methods (mobile pay, crypto, etc.)</li></ul><h3 id="_4-state-management" tabindex="-1">4. <strong>State Management</strong> <a class="header-anchor" href="#_4-state-management" aria-label="Permalink to &quot;4. **State Management**&quot;">​</a></h3><ul><li><strong>Decision</strong>: Simple state enum vs full State pattern</li><li><strong>Rationale</strong>: Parking spot states are simple enough for enum</li><li><strong>Note</strong>: Could upgrade to State pattern for more complex state transitions</li></ul><h3 id="_5-observer-pattern-for-notifications" tabindex="-1">5. <strong>Observer Pattern for Notifications</strong> <a class="header-anchor" href="#_5-observer-pattern-for-notifications" aria-label="Permalink to &quot;5. **Observer Pattern for Notifications**&quot;">​</a></h3><ul><li><strong>Decision</strong>: Observer pattern for event notifications</li><li><strong>Rationale</strong>: Multiple components need to react to parking events</li><li><strong>Benefits</strong>: Loose coupling, easy to add new observers</li></ul><h2 id="🔧-extensions-and-enhancements" tabindex="-1">🔧 Extensions and Enhancements <a class="header-anchor" href="#🔧-extensions-and-enhancements" aria-label="Permalink to &quot;🔧 Extensions and Enhancements&quot;">​</a></h2><h3 id="possible-extensions" tabindex="-1">Possible Extensions <a class="header-anchor" href="#possible-extensions" aria-label="Permalink to &quot;Possible Extensions&quot;">​</a></h3><ol><li><p><strong>Multi-level Parking</strong></p><ul><li>Add basement and upper floor support</li><li>Elevator simulation for vehicle movement</li></ul></li><li><p><strong>Reservation System</strong></p><ul><li>Advance booking of parking spots</li><li>Time-based reservations</li></ul></li><li><p><strong>VIP/Premium Services</strong></p><ul><li>Priority parking for premium members</li><li>Valet parking service</li></ul></li><li><p><strong>IoT Integration</strong></p><ul><li>Sensor-based spot detection</li><li>Automated entry/exit gates</li><li>Mobile app integration</li></ul></li><li><p><strong>Analytics and Reporting</strong></p><ul><li>Revenue analytics</li><li>Peak time analysis</li><li>Occupancy reports</li></ul></li></ol><h3 id="performance-optimizations" tabindex="-1">Performance Optimizations <a class="header-anchor" href="#performance-optimizations" aria-label="Permalink to &quot;Performance Optimizations&quot;">​</a></h3><ol><li><p><strong>Caching</strong></p><ul><li>Cache available spot counts</li><li>Cache frequently accessed data</li></ul></li><li><p><strong>Database Integration</strong></p><ul><li>Persistent storage for tickets and transactions</li><li>Database indexing for quick lookups</li></ul></li><li><p><strong>Concurrency Improvements</strong></p><ul><li>Better thread safety for high concurrency</li><li>Lock-free data structures where possible</li></ul></li></ol><h2 id="📚-learning-outcomes" tabindex="-1">📚 Learning Outcomes <a class="header-anchor" href="#📚-learning-outcomes" aria-label="Permalink to &quot;📚 Learning Outcomes&quot;">​</a></h2><p>After completing this case study, you should understand:</p><h3 id="design-principles" tabindex="-1">Design Principles <a class="header-anchor" href="#design-principles" aria-label="Permalink to &quot;Design Principles&quot;">​</a></h3><ul><li>✅ Single Responsibility Principle (each class has one purpose)</li><li>✅ Open/Closed Principle (easy to extend without modification)</li><li>✅ Interface Segregation (focused interfaces)</li><li>✅ Dependency Inversion (depend on abstractions)</li></ul><h3 id="design-patterns" tabindex="-1">Design Patterns <a class="header-anchor" href="#design-patterns" aria-label="Permalink to &quot;Design Patterns&quot;">​</a></h3><ul><li>✅ <strong>Factory Method</strong>: Creating different vehicle types</li><li>✅ <strong>Strategy</strong>: Different algorithms for spot allocation and payments</li><li>✅ <strong>Observer</strong>: Event-driven notifications</li><li>✅ <strong>State</strong>: Managing parking spot states (implicit)</li><li>✅ <strong>Template Method</strong>: Fee calculation workflow</li></ul><h3 id="system-design-concepts" tabindex="-1">System Design Concepts <a class="header-anchor" href="#system-design-concepts" aria-label="Permalink to &quot;System Design Concepts&quot;">​</a></h3><ul><li>✅ Object modeling and class relationships</li><li>✅ State management in systems</li><li>✅ Event-driven architecture</li><li>✅ Error handling and validation</li><li>✅ Extensible system design</li></ul><h2 id="🎓-practice-exercises" tabindex="-1">🎓 Practice Exercises <a class="header-anchor" href="#🎓-practice-exercises" aria-label="Permalink to &quot;🎓 Practice Exercises&quot;">​</a></h2><h3 id="exercise-1-basic-implementation" tabindex="-1">Exercise 1: Basic Implementation <a class="header-anchor" href="#exercise-1-basic-implementation" aria-label="Permalink to &quot;Exercise 1: Basic Implementation&quot;">​</a></h3><p>Implement the core parking lot system with:</p><ul><li>Basic vehicle parking/unparking</li><li>Simple fee calculation</li><li>Console-based interface</li></ul><h3 id="exercise-2-add-new-vehicle-types" tabindex="-1">Exercise 2: Add New Vehicle Types <a class="header-anchor" href="#exercise-2-add-new-vehicle-types" aria-label="Permalink to &quot;Exercise 2: Add New Vehicle Types&quot;">​</a></h3><p>Extend the system to support:</p><ul><li>Electric vehicles (special charging spots)</li><li>Handicapped vehicles (reserved spots)</li><li>Different fee structures for each type</li></ul><h3 id="exercise-3-implement-reservation-system" tabindex="-1">Exercise 3: Implement Reservation System <a class="header-anchor" href="#exercise-3-implement-reservation-system" aria-label="Permalink to &quot;Exercise 3: Implement Reservation System&quot;">​</a></h3><p>Add the ability to:</p><ul><li>Reserve spots in advance</li><li>Handle reservation conflicts</li><li>Different pricing for reserved vs walk-in</li></ul><h3 id="exercise-4-add-reporting-features" tabindex="-1">Exercise 4: Add Reporting Features <a class="header-anchor" href="#exercise-4-add-reporting-features" aria-label="Permalink to &quot;Exercise 4: Add Reporting Features&quot;">​</a></h3><p>Implement:</p><ul><li>Daily/monthly revenue reports</li><li>Occupancy statistics</li><li>Peak hour analysis</li></ul><h3 id="exercise-5-multi-location-support" tabindex="-1">Exercise 5: Multi-location Support <a class="header-anchor" href="#exercise-5-multi-location-support" aria-label="Permalink to &quot;Exercise 5: Multi-location Support&quot;">​</a></h3><p>Extend to support:</p><ul><li>Multiple parking lot locations</li><li>Cross-location reports</li><li>Different pricing per location</li></ul><h2 id="🔍-code-review-checklist" tabindex="-1">🔍 Code Review Checklist <a class="header-anchor" href="#🔍-code-review-checklist" aria-label="Permalink to &quot;🔍 Code Review Checklist&quot;">​</a></h2><p>When implementing this system, ensure:</p><ul><li>[ ] All classes follow Single Responsibility Principle</li><li>[ ] Proper use of inheritance vs composition</li><li>[ ] Thread safety for concurrent operations</li><li>[ ] Proper error handling and validation</li><li>[ ] Clean, readable code with good naming</li><li>[ ] Comprehensive unit tests</li><li>[ ] Proper use of design patterns</li><li>[ ] Extensible design for future enhancements</li></ul><hr><h2 id="📝-summary" tabindex="-1">📝 Summary <a class="header-anchor" href="#📝-summary" aria-label="Permalink to &quot;📝 Summary&quot;">​</a></h2><p>The Parking Lot System demonstrates fundamental OOP principles and design patterns in a realistic scenario. It showcases how to:</p><ul><li>Model real-world entities as classes</li><li>Use design patterns to solve common problems</li><li>Create extensible and maintainable systems</li><li>Handle state management and business logic</li><li>Implement event-driven architectures</li></ul><p>This case study serves as an excellent foundation for understanding system design and can be extended in numerous ways to explore more advanced concepts.</p><hr><p><a href="./../">← Back to Case Studies</a> | <a href="./../02-elevator-system/">Next: Elevator System →</a></p>',50))])}const C=k(c,[["render",g]]);export{A as __pageData,C as default};
